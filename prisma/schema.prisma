generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

// --- TUS MODELOS LIMPIOS Y BIEN DEFINIDOS ---

model Property {
  id             String          @id @default(uuid()) @map("id")
  title          String          @map("title")
  slug           String          @unique @map("slug")
  price          Float           @map("price")
  pricePerMonth  Float?          @map("pricePerMonth")
  description    String?         @map("description")
  imageUrl       String?         @map("imageUrl")
  status         String          @default("AVAILABLE") @map("status")
  rentalType     String          @default("DAILY") @map("rentalType")
  maxGuests      Int?            @map("maxGuests")
  bedrooms       Int?            @map("bedrooms")
  bathrooms      Int?            @map("bathrooms")
  address        String?         @map("address")
  mapLat         Float?          @map("mapLat")
  mapLng         Float?          @map("mapLng")
  mapUrl         String?         @map("mapUrl")
  whatsappNumber String?         @map("whatsappNumber")
  amenities      Amenity[]
  leads          Lead[]
  propertyImages PropertyImage[]
  createdAt      DateTime        @default(now()) @map("createdAt")
  updatedAt      DateTime        @updatedAt @map("updatedAt")

  @@map("Property")
}

model Amenity {
  id         String   @id @default(uuid()) @map("id")
  name       String   @map("name")
  propertyId String   @map("propertyId")
  property   Property @relation(fields: [propertyId], references: [id], onDelete: Cascade)

  @@map("Amenity")
}

model Lead {
  id         String    @id @default(uuid()) @map("id")
  propertyId String?   @map("propertyId")
  property   Property? @relation(fields: [propertyId], references: [id])
  name       String    @map("name")
  dni        String?   @map("dni")
  email      String    @map("email")
  phone      String?   @map("phone")
  message    String?   @map("message")
  status     String    @default("PENDIENTE") @map("status")
  checkIn    DateTime? @map("checkIn")
  checkOut   DateTime? @map("checkOut")
  createdAt  DateTime  @default(now()) @map("createdAt")

  @@map("Lead")
}

model PropertyImage {
  id         String   @id @default(uuid()) @map("id")
  propertyId String   @map("propertyId")
  property   Property @relation(fields: [propertyId], references: [id])
  url        String   @map("url")
  isCover    Boolean  @default(false) @map("isCover")
  createdAt  DateTime @default(now()) @map("createdAt")

  @@map("PropertyImage")
}

model HeroImage {
  id           String   @id @default(uuid())
  url          String
  alt          String?
  displayOrder Int      @default(0)
  isActive     Boolean  @default(true)
  createdAt    DateTime @default(now())

  @@map("HeroImage")
}

model AdminUser {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String
  name      String
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("AdminUser")
}

// --- HE BORRADO LOS MODELOS DUPLICADOS (amenities, leads, properties, etc.) ---
// --- PORQUE YA TIENES LOS DE ARRIBA MEJOR DEFINIDOS ---
